#!/usr/bin/env python3
# This file is placed in the Public Domain.
#
# pylint: disable=C0412,C0115,C0116,W0212,R0903,C0207,C0413,W0611
# pylint: disable=C0411,E0402,E0611,C2801


"command"


import getpass
import os
import sys


from bot.cfg import Cfg
from bot.hdl import Client, command
from bot.prs import parse
from bot.scn import scan
from bot.dsk import Storage


from bot import modules


Storage.workdir = Cfg.workdir


class CLI(Client):

    def announce(self, txt):
        pass

    def raw(self, txt):
        print(txt)
        sys.stdout.flush()


def main():
    parse(Cfg, " ".join(sys.argv[1:]))
    Cfg.mod = ",".join(modules.__dir__())
    cli = CLI()
    scan(modules, Cfg.mod)
    evt2 = cli.event(Cfg.otxt)
    parse(evt2)
    command(evt2)
    evt2.wait()


if __name__ == "__main__":
    main()
